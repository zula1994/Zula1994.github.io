import{_ as h,a as l,I as s,aw as k,E as i,o as p}from"./chunks/framework.Z4-7JWeT.js";const A=JSON.parse('{"title":"","description":"","frontmatter":{"uid":20240627170114,"cdate":"2024-06-27T00:00:00.000Z","mdate":"2024-06-27 æ˜ŸæœŸå›› 17:01:13","cssclasses":["max"],"comment":true,"tags":["å·¥å…·","nodejs"]},"headers":[],"relativePath":"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ä½¿ç”¨ffmpegå°†è§†é¢‘è½¬æ¢ä¸ºGIFæ–‡ä»¶.md","filePath":"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ä½¿ç”¨ffmpegå°†è§†é¢‘è½¬æ¢ä¸ºGIFæ–‡ä»¶.md"}'),e={name:"ç¬”è®°/ğŸ› ï¸ å¼€å‘/ä½¿ç”¨ffmpegå°†è§†é¢‘è½¬æ¢ä¸ºGIFæ–‡ä»¶.md"},r=k(`<h2 id="ä½¿ç”¨ffmpegå°†è§†é¢‘è½¬æ¢ä¸ºgifæ–‡ä»¶" tabindex="-1">ä½¿ç”¨ffmpegå°†è§†é¢‘è½¬æ¢ä¸ºGIFæ–‡ä»¶ <a class="header-anchor" href="#ä½¿ç”¨ffmpegå°†è§†é¢‘è½¬æ¢ä¸ºgifæ–‡ä»¶" aria-label="Permalink to &quot;ä½¿ç”¨ffmpegå°†è§†é¢‘è½¬æ¢ä¸ºGIFæ–‡ä»¶&quot;">â€‹</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> ffmpegPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;@ffmpeg-installer/ffmpeg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> ffmpeg</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fluent-ffmpeg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> video2Gif</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">videoPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">gifPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">fps</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ffmpeg</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setFfmpegPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ffmpegPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®äºŒè¿›åˆ¶å®¢æˆ·ç«¯è·¯å¾„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ffmpeg</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">videoPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¯»å…¥è·¯å¾„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">outputOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;-pix_fmt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;rgb24&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®åƒç´ æ ¼å¼ä¸ºrgb24</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">output</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">gifPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¾“å‡ºè·¯å¾„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">withFPS</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">fps</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®è¾“å‡ºGIFçš„å¸§ç‡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">width</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">x?\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®è¾“å‡ºGIFçš„å®½åº¦ï¼Œé«˜åº¦ç­‰æ¯”ç¼©æ”¾</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">noAudio</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç¦ç”¨éŸ³é¢‘è¾“å‡º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;è½¬æ¢å®Œæˆï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">video2Gif</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;2.mov&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;2.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><h2 id="å…³äºoutputoptions" tabindex="-1">å…³äºoutputOptions <a class="header-anchor" href="#å…³äºoutputoptions" aria-label="Permalink to &quot;å…³äºoutputOptions&quot;">â€‹</a></h2><p><code>.outputOptions()</code>æ–¹æ³•å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œç”¨äºè®¾ç½®è¾“å‡ºçš„å‚æ•°å’Œé€‰é¡¹ã€‚ä¸‹é¢æˆ‘åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„å‚æ•°å’Œé€‰é¡¹ï¼š</p><ul><li><code>-ss</code>ï¼šæŒ‡å®šå¼€å§‹æ—¶é—´ï¼Œä¾‹å¦‚ï¼š<code>.outputOptions(&#39;-ss&#39;, &#39;00:00:10&#39;)</code>è¡¨ç¤ºä»è§†é¢‘çš„ç¬¬10ç§’å¼€å§‹è½¬æ¢ã€‚</li><li><code>-t</code>ï¼šæŒ‡å®šè½¬æ¢çš„æŒç»­æ—¶é—´ï¼Œä¾‹å¦‚ï¼š<code>.outputOptions(&#39;-t&#39;, &#39;00:00:05&#39;)</code>è¡¨ç¤ºè½¬æ¢è§†é¢‘çš„å‰5ç§’ã€‚</li><li><code>-r</code>ï¼šæŒ‡å®šè¾“å‡ºçš„å¸§ç‡ï¼Œä¾‹å¦‚ï¼š<code>.outputOptions(&#39;-r&#39;, &#39;30&#39;)</code>è¡¨ç¤ºè¾“å‡ºGIFæ–‡ä»¶çš„å¸§ç‡ä¸º30å¸§/ç§’ã€‚</li><li><code>-loop</code>ï¼šæŒ‡å®šå¾ªç¯æ¬¡æ•°ï¼Œä¾‹å¦‚ï¼š<code>.outputOptions(&#39;-loop&#39;, &#39;0&#39;)</code>è¡¨ç¤ºæ— é™å¾ªç¯ã€‚</li><li><code>-vf</code>ï¼šæŒ‡å®šè§†é¢‘è¿‡æ»¤å™¨ï¼Œä¾‹å¦‚ï¼š<code>.outputOptions(&#39;-vf&#39;, &#39;scale=640:-1&#39;)</code>è¡¨ç¤ºå°†è§†é¢‘ç¼©æ”¾ä¸ºå®½åº¦ä¸º640åƒç´ ï¼Œé«˜åº¦æŒ‰æ¯”ä¾‹è‡ªåŠ¨è®¡ç®—ã€‚</li><li><code>-preset</code>ï¼šæŒ‡å®šè¾“å‡ºçš„è´¨é‡é¢„è®¾ï¼Œä¾‹å¦‚ï¼š<code>.outputOptions(&#39;-preset&#39;, &#39;slow&#39;)</code>è¡¨ç¤ºä½¿ç”¨æ…¢é€Ÿç¼–ç å™¨æ¥è·å¾—æ›´å¥½çš„è¾“å‡ºè´¨é‡ã€‚</li><li><code>-crf</code>ï¼šæŒ‡å®šè§†é¢‘çš„å‹ç¼©æ¯”ï¼Œä¾‹å¦‚ï¼š<code>.outputOptions(&#39;-crf&#39;, &#39;23&#39;)</code>è¡¨ç¤ºå‹ç¼©æ¯”ä¸º23ï¼Œæ•°å€¼è¶Šå°è¡¨ç¤ºè´¨é‡è¶Šå¥½ä½†æ–‡ä»¶è¶Šå¤§ã€‚</li></ul>`,5);function d(o,B,g,y,F,c){const a=i("NolebasePageProperties"),n=i("NolebaseGitContributors"),t=i("NolebaseGitChangelog");return p(),l("div",null,[s(a),r,s(n),s(t)])}const f=h(e,[["render",d]]);export{A as __pageData,f as default};
