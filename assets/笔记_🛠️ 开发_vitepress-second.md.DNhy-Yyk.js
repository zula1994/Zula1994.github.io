import{_ as l,a as e,I as s,b as a,f as p,aw as k,E as i,o as r}from"./chunks/framework.Z4-7JWeT.js";const F=JSON.parse('{"title":"使用 VitePress 和 Github 搭建个人博客网站，使用 github action 进行自动构建和发布","description":"","frontmatter":{"cdate":"2023-06-02T00:00:00.000Z","tags":["blog"],"cssclasses":["max"]},"headers":[],"relativePath":"笔记/🛠️ 开发/vitepress-second.md","filePath":"笔记/🛠️ 开发/vitepress-second.md"}'),d={name:"笔记/🛠️ 开发/vitepress-second.md"},o=a("h1",{id:"使用-vitepress-和-github-搭建个人博客网站-使用-github-action-进行自动构建和发布",tabindex:"-1"},[p("使用 VitePress 和 Github 搭建个人博客网站，使用 github action 进行自动构建和发布 "),a("a",{class:"header-anchor",href:"#使用-vitepress-和-github-搭建个人博客网站-使用-github-action-进行自动构建和发布","aria-label":'Permalink to "使用 VitePress 和 Github 搭建个人博客网站，使用 github action 进行自动构建和发布"'},"​")],-1),g=k(`<h3 id="_1-创建-github-仓库-仓库名为用户名-github-io" tabindex="-1">1. 创建 github 仓库，仓库名为<code>用户名.github.io</code> <a class="header-anchor" href="#_1-创建-github-仓库-仓库名为用户名-github-io" aria-label="Permalink to &quot;1. 创建 github 仓库，仓库名为\`用户名.github.io\`&quot;">​</a></h3><h3 id="_2-将-vitepress-build-后生成的-dist-上传至创建的仓库" tabindex="-1">2. 将 vitepress build 后生成的 dist 上传至创建的仓库 <a class="header-anchor" href="#_2-将-vitepress-build-后生成的-dist-上传至创建的仓库" aria-label="Permalink to &quot;2. 将 vitepress build 后生成的 dist 上传至创建的仓库&quot;">​</a></h3><h3 id="_3-添加-github-workflows-脚本" tabindex="-1">3. 添加 github workflows 脚本 <a class="header-anchor" href="#_3-添加-github-workflows-脚本" aria-label="Permalink to &quot;3. 添加 github workflows 脚本&quot;">​</a></h3><div class="danger custom-block"><p class="custom-block-title">workflows</p><p>当 push 代码到指定仓库时，会触发构建和发布流程，更新博客网站</p></div><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## .github/workflows/deploy.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Runs on pushes targeting the default branch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">    push</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">        branches</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;master&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    # Allows you to run this workflow manually from the Actions tab</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">    workflow_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">    deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">        runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">        permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">            pages</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">write</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">            id-token</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">write</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">        environment</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">            name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">github-pages</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">            url</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\${{ steps.deployment.outputs.page_url }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">        steps</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">              with</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">                  fetch-depth</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">pnpm/action-setup@v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">              with</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">                  version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">              with</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">                  node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">16</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">                  cache</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">pnpm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">pnpm install --no-frozen-lockfile</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">              run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">pnpm run build</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">actions/configure-pages@v2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">actions/upload-pages-artifact@v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">              with</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">                  path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.vitepress/dist</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">              id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">              uses</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">actions/deploy-pages@v1</span></span></code></pre></div><h3 id="_4-修改-github-配置-位置依旧在-settings-pages-build-and-deployment-source。将之前设置的-deploy-from-a-branch-修改为-github-actions。" tabindex="-1">4. 修改 GitHub 配置，位置依旧在 Settings -&gt; Pages -&gt; Build and deployment -&gt; Source。将之前设置的 Deploy from a branch，修改为 GitHub Actions。 <a class="header-anchor" href="#_4-修改-github-配置-位置依旧在-settings-pages-build-and-deployment-source。将之前设置的-deploy-from-a-branch-修改为-github-actions。" aria-label="Permalink to &quot;4. 修改 GitHub 配置，位置依旧在 Settings -&gt; Pages -&gt; Build and deployment -&gt; Source。将之前设置的 Deploy from a branch，修改为 GitHub Actions。&quot;">​</a></h3><p><img src="http://oss.zhuluu.cn/20230615221507.png" alt=""></p>`,7);function c(B,y,u,A,E,b){const n=i("NolebasePageProperties"),t=i("NolebaseGitContributors"),h=i("NolebaseGitChangelog");return r(),e("div",null,[o,s(n),g,s(t),s(h)])}const m=l(d,[["render",c]]);export{F as __pageData,m as default};
